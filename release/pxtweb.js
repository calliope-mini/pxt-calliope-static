var pxt;!function(t){var r,o,n=[],i=!1,s=function(){function t(t){this.log=t,this.q=[],n.push(this)}return t.prototype.track=function(t,e,n){i?this.log(t,e,n):(this.q.push([t,e,n]),20<this.q.length&&this.q.shift())},t.prototype.flush=function(){for(;this.q.length;){var t=this.q.shift(),e=t[0],n=t[1],r=t[2];this.log(e,n,r)}},t}();function f(t){void 0===t&&(t=!1);var e=window.loadAppInsights;e&&(e(t),i=!0,n.forEach(function(t){return t.flush()}))}function d(t){if(document.head){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e.setAttribute("type","text/css"),document.head.appendChild(e)}}function p(t,e){var n=!1;if(!document.body)throw new Error("Bad call to injectScriptAsync");var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.onload=function(t){n||(e(),n=!0)},r.onerror=function(t){n||(e(t),n=!0)},document.body.appendChild(r),r.setAttribute("src",t)}!function(f){function n(){return Math.round(performance.now()-f.startTimeMs)}function d(t){var e=(t=Math.round(t))%1e3,n=Math.floor(t/1e3),r=n%60,o=Math.floor(n/60);return 0<o?o+"m"+r+"s":5<n?n+"s":0<n?n+"s"+e+"ms":t+"ms"}function t(t,e){void 0===e&&(e=n()),f.stats.milestones.push([t,e])}function e(){performance.measure("measure from the start of navigation to now");var t=performance.getEntriesByType("measure")[0];f.startTimeMs=t.startTime}f.stats={durations:[],milestones:[]},f.perfReportLogged=!1,f.splitMs=n,f.prettyStr=d,f.splitStr=function(){return d(n())},f.recordMilestone=t,f.init=e,f.measureStart=function(t){performance.mark(t+" start")},f.measureEnd=function(t){if(performance.getEntriesByName(t+" start").length){performance.mark(t+" end"),performance.measure(t+" elapsed",t+" start",t+" end");var e=performance.getEntriesByName(t+" elapsed","measure");if(e&&1===e.length){var n=e[0],r=n.duration;10<r&&f.stats.durations.push([t,n.startTime,r])}performance.clearMarks(t+" start"),performance.clearMarks(t+" end"),performance.clearMeasures(t+" elapsed")}},f.report=function(){for(var t="performance report:\n",e=0,n=f.stats.milestones;e<n.length;e++){var r=n[e];t+="\t\t"+(a=r[0])+" @ "+d(r[1])+"\n"}t+="\n";for(var o=0,i=f.stats.durations;o<i.length;o++){var s=i[o],a=s[0],c=s[1],u=s[2];50<u&&(t+="\t\t"+a+" took ~ "+d(u),1e3<u&&(t+=" ("+d(c)+" - "+d(c+u)+")"),t+="\n")}console.log(t),f.perfReportLogged=!0},e(),t("first JS running")}(t.perf||(t.perf={})),t.initAnalyticsAsync=function(){var t,e,n,r,o,i,s,a;t="undefined"!=typeof window,e="undefined"!=typeof Windows,n=t&&!!window.pxtElectron,r=t&&!!window.ipcRenderer||/ipc=1/.test(location.hash)||/ipc=1/.test(location.search),e||n||r||function(){try{return window&&window.self!==window.top}catch(t){return!1}}()&&/nocookiebanner=1/i.test(window.location.href)?f(!0):/sandbox=1|#sandbox|#sandboxproject/i.test(window.location.href)?f(!1):(o=document.domain,a=/(live)?lang=([a-z]{2,}(-[A-Z]+)?)/i.exec(window.location.href),i=a?a[2]:navigator.userLanguage||navigator.language,s=function(t,e){if(t||e.Error)f(!1);else{if(function(t,e){var n=Date.parse(e);if(!isNaN(n)&&document&&document.cookie)for(var r=document.cookie.split(";"),o=0,i=r;o<i.length;o++){var s=i[o];if((s=s.trim()).indexOf("=")==t.length&&s.substr(0,t.length)==t){var a=parseInt(s.substr(t.length+1));return!!isNaN(a)||a<Math.floor(n/1e3)}}return!0}(e.CookieName,e.MinimumConsentDate)){var n=new Date(0).toUTCString();document.cookie="ai_user=; expires="+n,document.cookie="ai_session=; expires="+n,document.cookie=e.CookieName+"=0; expires="+n}var r,o,i,s,a,c,u=document.getElementById("cookiebanner");u||(u=document.createElement("div"),document.body.insertBefore(u,document.body.firstChild)),u.innerHTML=e.Markup,e.Css&&e.Css.length&&e.Css.forEach(d),r=e.Js||[],o=p,i=function(t){t||"undefined"==typeof mscc||(mscc.hasConsent()?f(!0):mscc.on("consent",function(){return f(!0)}))},s=0,a=[],(c=function(){s>=r.length?i(void 0,a):o(r[s++],function(t,e){t?i(t):(a.push(e),c())})})()}},function(t,e){try{var n,r=!1;(n=new XMLHttpRequest).onreadystatechange=function(){if(!r&&4==n.readyState){r=!0;var t={status:n.status,body:n.responseText};e(void 0,t)}},n.open("GET",t),n.send()}catch(t){e(t)}}("https://makecode.com/api/mscc/"+o+"/"+i,function(t,e){if(t)s(t);else{if(200===e.status)try{var n=JSON.parse(e.body);return void s(void 0,n)}catch(t){return void s(new Error("Bad response from server: "+e.body))}s(new Error("didn't get 200 response: "+e.status+" "+e.body))}}))},t.aiTrackEvent=function(t,e,n){r||(r=new s(function(t,e,n){return window.appInsights.trackEvent(t,e,n)})),r.track(t,e,n)},t.aiTrackException=function(t,e,n){o||(o=new s(function(t,e,n){return window.appInsights.trackException(t,e,n)})),o.track(t,e,n)},t.initializeAppInsightsInternal=f}(pxt||(pxt={}));